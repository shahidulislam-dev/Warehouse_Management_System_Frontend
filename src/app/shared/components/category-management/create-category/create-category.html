<!-- components/category-management/create-category/create-category.html -->
<mat-dialog-content class="p-6 min-w-[90vw] md:min-w-[500px]">
  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-bold text-gray-800">
      {{ isEdit ? 'Edit Category' : 'Add New Category' }}
    </h2>
    <button mat-icon-button (click)="onCancel()" class="text-gray-400 hover:text-gray-600" type="button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Form -->
  <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Category Name Field -->
    <div class="space-y-2">
      <label for="name" class="block text-sm font-medium text-gray-700">
        Category Name *
      </label>
      <mat-form-field appearance="outline" class="w-full">
        <input matInput id="name" formControlName="name" placeholder="Enter category name" maxlength="100">
        <mat-icon matSuffix class="text-gray-400">category</mat-icon>
        <mat-hint align="end">
          {{ categoryForm.get('name')?.value?.length || 0 }}/100
        </mat-hint>
        @if (categoryForm.get('name')?.hasError('required')) {
          <mat-error>Category name is required</mat-error>
        }
        @if (categoryForm.get('name')?.hasError('minlength')) {
          <mat-error>Category name must be at least 2 characters</mat-error>
        }
        @if (categoryForm.get('name')?.hasError('maxlength')) {
          <mat-error>Category name cannot exceed 100 characters</mat-error>
        }
      </mat-form-field>
    </div>

    <!-- Unit Field -->
    <div class="space-y-2">
      <label for="unit" class="block text-sm font-medium text-gray-700">
        Default Unit *
      </label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select formControlName="unit" id="unit" placeholder="Select Unit">
          <mat-option value="">Select Unit</mat-option>
          @for (unit of units; track unit) {
            <mat-option [value]="unit">
              {{ unit }}
            </mat-option>
          }
        </mat-select>
        @if (categoryForm.get('unit')?.hasError('required')) {
          <mat-error>Unit selection is required</mat-error>
        }
      </mat-form-field>
      <p class="text-sm text-gray-500">
        This unit will be used for all goods in this category
      </p>
    </div>
    <!--Size Unit Field -->
    <div class="space-y-2">
      <label for="sizeUnit" class="block text-sm font-medium text-gray-700">
        Default Size Unit *
      </label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select formControlName="sizeUnit" id="sizeUnit" placeholder="Select Size Unit">
          <mat-option value="">Select Size Unit</mat-option>
          @for (sizeUnit of units; track sizeUnit) {
            <mat-option [value]="sizeUnit">
              {{ sizeUnit }}
            </mat-option>
          }
        </mat-select>
        @if (categoryForm.get('sizeUnit')?.hasError('required')) {
          <mat-error>Unit selection is required</mat-error>
        }
      </mat-form-field>
      <p class="text-sm text-gray-500">
        This unit will be used for all goods in this category
      </p>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions class="p-6 pt-0 justify-end gap-3">
  <!-- Action Buttons -->
  <div class="flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 w-full gap-3">
    <button type="button" (click)="onCancel()" [disabled]="loading" mat-button 
            class="w-full sm:w-auto px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 font-medium disabled:opacity-50">
      Cancel
    </button>
    <button type="submit" [disabled]="categoryForm.invalid || loading" mat-raised-button color="primary"
            class="w-full sm:w-auto px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
            (click)="onSubmit()">
      @if (loading) {
        <mat-spinner diameter="20"></mat-spinner>
      }
      <span>{{ loading ? 'Saving...' : (isEdit ? 'Update' : 'Create') }} Category</span>
    </button>
  </div>
</mat-dialog-actions>